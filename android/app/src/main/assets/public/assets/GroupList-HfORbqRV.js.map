{"version":3,"file":"GroupList-HfORbqRV.js","sources":["../../src/pages/GroupList/GroupList.tsx"],"sourcesContent":["import GroupService from '@/api/group'\nimport { $t } from '@/shared'\nimport useMessageStore from '@/stores/message'\nimport { useAsyncEffect } from '@reactuses/core'\nimport { List, ListGroup, ListItem, NavTitle, Navbar, Page, f7 } from 'framework7-react'\nimport { useState } from 'react'\n\nconst GroupListList: React.FC<RouterProps> = ({ f7router }) => {\n\t// 消息列表\n\tconst messageStore = useMessageStore()\n\tconst [groups, setGroups] = useState({})\n\tuseAsyncEffect(\n\t\tasync () => {\n\t\t\ttry {\n\t\t\t\tf7.dialog.preloader($t('获取中...'))\n\t\t\t\tconst { code, data } = await GroupService.groupListApi()\n\t\t\t\tcode === 200 && setGroups(data)\n\t\t\t} catch (error: any) {\n\t\t\t\tf7.dialog.alert($t(error?.message || '获取群列表失败...'))\n\t\t\t} finally {\n\t\t\t\tf7.dialog.close()\n\t\t\t}\n\t\t},\n\t\t() => {},\n\t\t[]\n\t)\n\n\treturn (\n\t\t<Page className=\"group-page\" noToolbar messagesContent>\n\t\t\t<Navbar className=\"messages-navbar\" backLink>\n\t\t\t\t<NavTitle>\n\t\t\t\t\t<div className=\"\">{$t('群组')}</div>\n\t\t\t\t</NavTitle>\n\t\t\t</Navbar>\n\t\t\t<List contactsList noChevron dividers>\n\t\t\t\t{Object.keys(groups).map((groupKey) => (\n\t\t\t\t\t<ListGroup key={groupKey}>\n\t\t\t\t\t\t<ListItem groupTitle title={groupKey} />\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\tgroups[groupKey].map((group: any) => (\n\t\t\t\t\t\t\t\t<ListItem\n\t\t\t\t\t\t\t\t\tkey={group.group_id}\n\t\t\t\t\t\t\t\t\t// link={`/message/${group?.group_id}/${group?.dialog_id}/?is_group=${group?.user_id ? 'false' : 'true'}&dialog_name=${group?.name}`}\n\t\t\t\t\t\t\t\t\ttitle={group.name}\n\t\t\t\t\t\t\t\t\tpopupClose\n\t\t\t\t\t\t\t\t\tonClick={async () => {\n\t\t\t\t\t\t\t\t\t\tawait messageStore.init({\n\t\t\t\t\t\t\t\t\t\t\tdialogId: group?.dialog_id ?? 0,\n\t\t\t\t\t\t\t\t\t\t\treceiverId: group?.user_id ?? group?.group_id ?? 0,\n\t\t\t\t\t\t\t\t\t\t\tisGroup: !!group?.group_id,\n\t\t\t\t\t\t\t\t\t\t\treceiverInfo: group\n\t\t\t\t\t\t\t\t\t\t\t// group?.group_id ? true : false,\n\t\t\t\t\t\t\t\t\t\t\t// group?.dialog_id,\n\t\t\t\t\t\t\t\t\t\t\t// group?.user_id ?? group?.group_id\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\tf7router.navigate(\n\t\t\t\t\t\t\t\t\t\t\t`/message/${group?.group_id}/${group?.dialog_id}/?is_group=${group?.user_id ? 'false' : 'true'}&dialog_name=${group?.name}`\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tslot=\"media\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"size-10  object-cover rounded-full\"\n\t\t\t\t\t\t\t\t\t\tsrc={group.avatar}\n\t\t\t\t\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t\t))\n\t\t\t\t\t\t}\n\t\t\t\t\t</ListGroup>\n\t\t\t\t))}\n\t\t\t</List>\n\t\t</Page>\n\t)\n}\n\nexport default GroupListList\n"],"names":["GroupListList","f7router","messageStore","useMessageStore","groups","setGroups","useState","useAsyncEffect","f7","$t","code","data","GroupService","error","Page","jsx","Navbar","NavTitle","List","groupKey","ListGroup","ListItem","group"],"mappings":"0HAOA,MAAMA,EAAuC,CAAC,CAAE,SAAAC,KAAe,CAE9D,MAAMC,EAAeC,IACf,CAACC,EAAQC,CAAS,EAAIC,EAAA,SAAS,CAAE,CAAA,EACvC,OAAAC,EACC,SAAY,CACP,GAAA,CACHC,EAAG,OAAO,UAAUC,EAAG,QAAQ,CAAC,EAChC,KAAM,CAAE,KAAAC,EAAM,KAAAC,CAAA,EAAS,MAAMC,EAAa,aAAa,EAC9CF,IAAA,KAAOL,EAAUM,CAAI,QACtBE,EAAY,CACpBL,EAAG,OAAO,MAAMC,GAAGI,GAAA,YAAAA,EAAO,UAAW,YAAY,CAAC,CAAA,QACjD,CACDL,EAAG,OAAO,OACX,CACD,EACA,IAAM,CAAC,EACP,CAAC,CAAA,SAIAM,EAAK,CAAA,UAAU,aAAa,UAAS,GAAC,gBAAe,GACrD,SAAA,CAAAC,MAACC,EAAO,CAAA,UAAU,kBAAkB,SAAQ,GAC3C,SAACD,MAAAE,EAAA,CACA,SAACF,EAAAA,IAAA,MAAA,CAAI,UAAU,GAAI,SAAAN,EAAG,IAAI,CAAA,CAAE,CAC7B,CAAA,EACD,QACCS,EAAK,CAAA,aAAY,GAAC,UAAS,GAAC,SAAQ,GACnC,SAAO,OAAA,KAAKd,CAAM,EAAE,IAAKe,UACxBC,EACA,CAAA,SAAA,CAAAL,EAAA,IAACM,EAAS,CAAA,WAAU,GAAC,MAAOF,EAAU,EAGrCf,EAAOe,CAAQ,EAAE,IAAKG,GACrBP,EAAA,IAACM,EAAA,CAGA,MAAOC,EAAM,KACb,WAAU,GACV,QAAS,SAAY,CACpB,MAAMpB,EAAa,KAAK,CACvB,UAAUoB,GAAA,YAAAA,EAAO,YAAa,EAC9B,YAAYA,GAAA,YAAAA,EAAO,WAAWA,GAAA,YAAAA,EAAO,WAAY,EACjD,QAAS,CAAC,EAACA,GAAA,MAAAA,EAAO,UAClB,aAAcA,CAAA,CAId,EACQrB,EAAA,SACR,YAAYqB,GAAA,YAAAA,EAAO,QAAQ,IAAIA,GAAA,YAAAA,EAAO,SAAS,cAAcA,GAAA,MAAAA,EAAO,QAAU,QAAU,MAAM,gBAAgBA,GAAA,YAAAA,EAAO,IAAI,EAAA,CAE3H,EAEA,SAAAP,EAAA,IAAC,MAAA,CACA,KAAK,QACL,UAAU,qCACV,IAAKO,EAAM,OACX,IAAI,EAAA,CACL,CAAA,EAxBKA,EAAM,QAAA,CA0BZ,CAAA,GAhCaH,CAkChB,CACA,EACF,CACD,CAAA,CAAA,CAEF"}