import{r as t,u as P,j as s,P as I,B as j,$ as a,L as v,a as l,c as i,t as n,d as M,e as _,U as C,f as b}from"./index-D6xPw8DV.js";import{C as F,L as A,a as L,A as N}from"./Auth-BOnW8hkd.js";import{v as B,a as D}from"./validate-6tRYFLtu.js";const $=({f7router:p})=>{const[r,o]=t.useState({nickname:"",email:"",password:"",confirm_password:""}),[f,c]=t.useState(""),[x,u]=t.useState(""),[g,m]=t.useState(""),[w,h]=t.useState(!1),S=P(),E=()=>{let e=!1;return w?e:r.email.trim()?B(r.email.trim())?r.password.trim()?D(r.password.trim())?r.confirm_password.trim()?r.password.trim()!==r.confirm_password.trim()?(m(a("两次密码不一致")),e):(e=!0,h(!0),e):(m(a("确认密码不能为空")),e):(u(a("密码强度不够")),e):(u(a("密码不能为空")),e):(c(a("邮箱格式不正确")),e):(c(a("邮箱不能为空")),e)},k=async()=>{try{if(!E())return;const{code:e,data:d,msg:y}=await C.registerApi(r);if(e!==200){b.dialog.alert(y);return}S.update({userId:d==null?void 0:d.user_id}),p.navigate("/login/",{props:{defaultData:r}})}catch{b.dialog.alert(a("注册失败,请稍后重试"))}finally{h(!1)}};return s.jsxs(I,{loginScreen:!0,noToolbar:!0,children:[s.jsx(j,{className:"fixed top-0 left-0",children:s.jsx(F,{className:"text-2xl text-primary",onClick:()=>p.back()})}),s.jsxs(j,{className:"px-2",children:[s.jsx(A,{children:a("注册")}),s.jsxs(v,{form:!0,children:[s.jsx(l,{label:a("用户名"),type:"text",placeholder:a("请输入用户名"),outline:!0,value:r.nickname,onInput:e=>{o({...r,nickname:e.target.value})},floatingLabel:!0,className:"el-input",children:s.jsx(L,{slot:"media",className:i("w-5 h-5 text-icon-60",n.ios&&"mt-1")})}),s.jsx(l,{label:a("邮箱"),type:"text",placeholder:a("请输入邮箱"),className:"el-input",outline:!0,value:r.email,onInput:e=>{o({...r,email:e.target.value}),c("")},floatingLabel:!0,errorMessage:f,errorMessageForce:!!f,children:s.jsx(N,{slot:"media",className:i("w-5 h-5 text-icon-60",n.ios&&"mt-1")})}),s.jsx(l,{label:a("密码"),type:"password",placeholder:a("请输入密码"),className:"el-input",outline:!0,value:r.password,onInput:e=>{o({...r,password:e.target.value}),u("")},floatingLabel:!0,errorMessage:x,errorMessageForce:!!x,children:s.jsx(L,{slot:"media",className:i("w-5 h-5 text-icon-60",n.ios&&"mt-1")})}),s.jsx(l,{label:a("确认密码"),type:"password",placeholder:a("请输入确认密码"),className:"el-input",outline:!0,value:r.confirm_password,onInput:e=>{o({...r,confirm_password:e.target.value}),m("")},floatingLabel:!0,errorMessage:g,errorMessageForce:!!g,children:s.jsx(N,{slot:"media",className:i("w-5 h-5 text-icon-60",n.ios&&"mt-1")})})]}),s.jsx(v,{inset:!0,children:s.jsx(M,{onClick:k,large:!0,className:"mx-[16px] mb-5",fill:!0,round:!0,text:a("注册"),children:w&&s.jsx(_,{size:"18",color:"white"})})})]})]})};export{$ as default};
//# sourceMappingURL=RegisterScreen-TOBeowlw.js.map
