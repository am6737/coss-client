{"version":3,"file":"ChangeUserID-RTA6WTFI.js","sources":["../../src/pages/ChangeUserID/ChangeUserID.tsx"],"sourcesContent":["import { f7, Button, Link, Navbar, NavRight, Page } from 'framework7-react'\nimport { useState } from 'react'\nimport { $t } from '@/shared'\nimport UserService from '@/api/user'\nimport useUserStore from '@/stores/user'\nimport CommInput from '@/components/CommInput/CommInput'\nimport useLoading from '@/hooks/useLoading'\n\nconst ChangeUserID: React.FC<RouterProps> = ({ f7router }) => {\n\tconst [isChangeID, setIsChangeID] = useState(false)\n\tconst [id, setId] = useState('')\n\tconst [verify, setVerify] = useState(true)\n\n\tconst userStore = useUserStore()\n\tconst { watchAsyncFn } = useLoading()\n\tconst handlerSubmit = () => {\n\t\tconst regex = /^[a-zA-Z0-9_]{10,20}$/\n\t\tif (regex.test(id)) {\n\t\t\tsetVerify(true)\n\t\t\twatchAsyncFn(() => {\n\t\t\t\treturn UserService.updateUserInfoApi({\n\t\t\t\t\tcoss_id: id\n\t\t\t\t})\n\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\tif (res.code == 200) {\n\t\t\t\t\t\t\tuserStore.update({ userInfo: { ...userStore.userInfo, coss_id: id } })\n\t\t\t\t\t\t\tf7router.back()\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tf7.dialog.alert($t(res.msg))\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\tf7.dialog.alert($t('修改失败'))\n\t\t\t\t\t})\n\t\t\t})\n\t\t} else setVerify(false)\n\t}\n\treturn (\n\t\t<Page noToolbar>\n\t\t\t<Navbar backLink>\n\t\t\t\t{isChangeID && (\n\t\t\t\t\t<NavRight>\n\t\t\t\t\t\t<Link onClick={handlerSubmit}>提交</Link>\n\t\t\t\t\t</NavRight>\n\t\t\t\t)}\n\t\t\t</Navbar>\n\t\t\t{isChangeID || (\n\t\t\t\t<div className=\"flex h-full flex-col justify-center gap-y-52\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h2 className=\"text-center font-bold text-xl\">\n\t\t\t\t\t\t\t{$t('用户ID')}: {userStore.userInfo?.coss_id}\n\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t<p className=\"text-center text-gray-400\">{$t('修改用户ID后，将无法找回原用户ID')}</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"flex justify-center\">\n\t\t\t\t\t\t<Button className=\"w-52\" onClick={() => setIsChangeID(!isChangeID)} fill large round>\n\t\t\t\t\t\t\t{$t('修改用户ID')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t{isChangeID && (\n\t\t\t\t<div className=\"flex h-full flex-col\">\n\t\t\t\t\t<h1 className=\"text-center text-xl font-bold mt-10 mb-5\">修改用户ID</h1>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<CommInput defaultValue={userStore.userInfo?.coss_id} onChange={(value: any) => setId(value)} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<span style={{ color: verify ? '#bbb' : 'red' }} className=\"px-5 mt-5\">\n\t\t\t\t\t\t只能包含大小写字母、数字和下划线，并且长度在10到20个字符之间\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</Page>\n\t)\n}\n\nexport default ChangeUserID\n"],"names":["ChangeUserID","f7router","isChangeID","setIsChangeID","useState","id","setId","verify","setVerify","userStore","useUserStore","watchAsyncFn","useLoading","handlerSubmit","UserService","res","f7","$t","jsxs","Page","jsx","Navbar","NavRight","Link","_a","Button","CommInput","_b","value"],"mappings":"uHAQA,MAAMA,EAAsC,CAAC,CAAE,SAAAC,KAAe,SAC7D,KAAM,CAACC,EAAYC,CAAa,EAAIC,WAAS,EAAK,EAC5C,CAACC,EAAIC,CAAK,EAAIF,WAAS,EAAE,EACzB,CAACG,EAAQC,CAAS,EAAIJ,WAAS,EAAI,EAEnCK,EAAYC,IACZ,CAAE,aAAAC,GAAiBC,IACnBC,EAAgB,IAAM,CACb,wBACJ,KAAKR,CAAE,GAChBG,EAAU,EAAI,EACdG,EAAa,IACLG,EAAY,kBAAkB,CACpC,QAAST,CAAA,CACT,EACC,KAAMU,GAAQ,CACVA,EAAI,MAAQ,KACLN,EAAA,OAAO,CAAE,SAAU,CAAE,GAAGA,EAAU,SAAU,QAASJ,CAAG,CAAA,CAAG,EACrEJ,EAAS,KAAK,GAEde,EAAG,OAAO,MAAMC,EAAGF,EAAI,GAAG,CAAC,CAC5B,CACA,EACA,MAAM,IAAM,CACZC,EAAG,OAAO,MAAMC,EAAG,MAAM,CAAC,CAAA,CAC1B,CACF,GACKT,EAAU,EAAK,CAAA,EAGtB,OAAAU,EAAA,KAACC,EAAK,CAAA,UAAS,GACd,SAAA,CAAAC,MAACC,EAAO,CAAA,SAAQ,GACd,SAAAnB,GACCkB,EAAA,IAAAE,EAAA,CACA,SAACF,MAAAG,EAAA,CAAK,QAASV,EAAe,SAAE,IAAA,CAAA,CACjC,CAAA,EAEF,EACCX,GACAgB,EAAA,KAAC,MAAI,CAAA,UAAU,+CACd,SAAA,CAAAA,OAAC,MACA,CAAA,SAAA,CAACA,EAAAA,KAAA,KAAA,CAAG,UAAU,gCACZ,SAAA,CAAAD,EAAG,MAAM,EAAE,MAAGO,EAAAf,EAAU,WAAV,YAAAe,EAAoB,OAAA,EACpC,QACC,IAAE,CAAA,UAAU,4BAA6B,SAAAP,EAAG,oBAAoB,EAAE,CAAA,EACpE,EACAG,EAAAA,IAAC,OAAI,UAAU,sBACd,eAACK,EAAO,CAAA,UAAU,OAAO,QAAS,IAAMtB,EAAc,CAACD,CAAU,EAAG,KAAI,GAAC,MAAK,GAAC,MAAK,GAClF,SAAAe,EAAG,QAAQ,CAAA,CACb,CACD,CAAA,CAAA,EACD,EAEAf,GACAgB,EAAA,KAAC,MAAI,CAAA,UAAU,uBACd,SAAA,CAACE,EAAA,IAAA,KAAA,CAAG,UAAU,2CAA2C,SAAM,SAAA,EAC9DA,EAAA,IAAA,MAAA,CACA,SAACA,EAAA,IAAAM,EAAA,CAAU,cAAcC,EAAAlB,EAAU,WAAV,YAAAkB,EAAoB,QAAS,SAAWC,GAAetB,EAAMsB,CAAK,CAAG,CAAA,EAC/F,EACAR,EAAAA,IAAC,OAAK,CAAA,MAAO,CAAE,MAAOb,EAAS,OAAS,KAAM,EAAG,UAAU,YAAY,SAEvE,kCAAA,CAAA,CAAA,EACD,CAEF,CAAA,CAAA,CAEF"}