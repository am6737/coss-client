import{r as j,u as k,k as p,j as s,P as h,N as y,$ as e,L as o,l,B as N,b as c,f as i,U as f,m as v,C as n}from"./index-CyFq9ppu.js";import{e as $}from"./tweetnacl-CDkSAM5x.js";const w=({f7router:m,f7route:d})=>{const[t,u]=j.useState({}),r=k(async()=>{const a=await n.findOneById(n.tables.users,"user_id",d.params.user_id);return u(a==null?void 0:a.user_info),console.log("reslut?.user_info",a),a}),_=()=>{i.dialog.confirm(e("退出登录"),e("确定要退出登录吗？"),async()=>{try{i.dialog.preloader(e("正在退出...")),await f.logoutApi({login_number:t==null?void 0:t.login_number})}catch{i.dialog.alert(e("退出登录失败"))}finally{v(),m.navigate("/auth/"),i.dialog.close()}})},[,g]=p(),x=async()=>{try{const a=r==null?void 0:r.keyPair;if(a){const b=$(a);return g(b),i.dialog.alert(e("已经成功导出到剪切板"))}i.dialog.alert(e("导出身份信息失败"))}catch{i.dialog.alert(e("导出身份信息失败"))}};return s.jsxs(h,{className:"bg-bgTertiary",noToolbar:!0,children:[s.jsx(y,{className:"bg-bgPrimary hidden-navbar-bg",backLink:!0,outline:!1,title:e("个人信息")}),s.jsxs(o,{className:"coss_list",strong:!0,children:[s.jsx(l,{link:!0,title:"头像",children:s.jsx("div",{slot:"after",children:s.jsx("img",{className:"w-12 h-12 rounded-full bg-black bg-opacity-10",src:t==null?void 0:t.avatar,alt:""})})}),s.jsx(l,{link:`/update_user_info/nickname/?default=${t==null?void 0:t.nickname}&title=${e("修改昵称")}`,title:e("昵称"),className:"coss_item__bottom",after:t==null?void 0:t.nickname}),s.jsx(l,{link:`/update_user_info/signature/?default=${t==null?void 0:t.signature}&title=${e("修改签名")}`,title:e("签名"),className:"coss_item__bottom",children:s.jsx("div",{slot:"after",className:"max-w-[200px] text-ellipsis overflow-hidden",children:t==null?void 0:t.signature})}),s.jsx(l,{link:`/update_user_info/tel/?default=${(t==null?void 0:t.tel)||""}&title=${e("修改手机号")}`,title:e("手机号"),className:"coss_item__bottom",after:t==null?void 0:t.tel})]}),s.jsxs(o,{className:"coss_list",strong:!0,children:[s.jsx(l,{link:!0,title:e("邮箱"),noChevron:!0,className:"coss_item__bottom",after:t==null?void 0:t.email}),s.jsx(l,{link:!0,title:e("我的二维码"),noChevron:!0,className:"coss_item__bottom"})]}),s.jsx(o,{className:"coss_list",strong:!0,children:s.jsx(l,{link:`/update_user_info/password/?default=&title=${e("修改密码")}`,title:e("更改密码"),className:"coss_item__bottom"})}),s.jsxs(N,{children:[s.jsx(c,{onClick:x,fill:!0,large:!0,round:!0,className:"mb-3",children:e("导出身份信息")}),s.jsx(c,{color:"red",onClick:()=>_(),fill:!0,large:!0,round:!0,children:e("退出登录")})]})]})};export{w as default};
