import{r as d,H as h,u as v,j as s,P as N,N as b,p as k,I as y,ax as S,U as w,f as I,s as c,g as U,A,T as E}from"./index-D6xPw8DV.js";const u={margin:"0 20px",marginBottom:"10px",background:"var(--coss-background-primary)",padding:"15px",borderRadius:"5px"},T=({f7router:x})=>{const[t,m]=d.useState(),o=localStorage.getItem("__USER_ID__");d.useEffect(()=>{const r=localStorage.getItem("user_list");m(JSON.parse(r)),console.log("账号列表数据",t)},[]);const{watchAsyncFn:f}=h(),g=v(),p=async r=>{var n,i,l;if(console.log("切换账号",t),o==t[r].user_id)return;const{identifier:a}=await S.getId();console.log(t.password);const{code:j,data:e,msg:_}=await f(()=>w.loginApi({password:t[r].password,email:t[r].email,driver_id:a,platform:"ios",driver_token:"7bd439461e80d13a889e08d0c351fdcfa2c697b920536b4a3787ecf69a5206dc"}));if(console.log("登录",e),j!==200){I.dialog.alert(_);return}c(U,(n=e==null?void 0:e.user_info)==null?void 0:n.user_id),c(A,(i=e==null?void 0:e.user_info)==null?void 0:i.email),c(E,e==null?void 0:e.token),g.update({userId:(l=e==null?void 0:e.user_info)==null?void 0:l.user_id,token:e==null?void 0:e.token,userInfo:e==null?void 0:e.user_info,deviceId:a}),location.reload()};return s.jsxs(N,{className:"bg-bgTertiary",noToolbar:!0,children:[s.jsx(b,{backLink:!0}),s.jsx("h1",{className:"text-center mt-20 text-2xl",children:"点击头像切换账号"}),s.jsxs("div",{className:"mt-20 ",children:[t&&t.map((r,a)=>s.jsxs("div",{onClick:()=>p(a),style:u,className:"flex",children:[s.jsx(k,{square:!0,src:r.avatar}),s.jsxs("div",{className:"flex flex-col flex-1 justify-center ml-2",children:[s.jsxs("div",{className:"flex w-full justify-between",children:[s.jsx("span",{className:"text-lg",children:r.nickname}),o==r.user_id&&s.jsx("span",{className:"text-green-600",children:"目前使用"})]}),s.jsx("span",{className:"text-textSecondary",children:r.coss_id})]})]},r.user_id)),s.jsxs("div",{onClick:()=>x.navigate("/login/?switch_account=true"),style:u,className:"flex items-center",children:[s.jsx("div",{className:"w-12 h-12 flex flex-col justify-center items-center border-dashed border-[1px] border-gray-400 text-gray-500 rounded-lg",children:s.jsx(y,{f7:"plus",size:18})}),s.jsx("div",{className:"ml-2 text-textSecondary text-lg",children:s.jsx("span",{children:"新增账号"})})]})]})]})};export{T as default};
//# sourceMappingURL=SwitchAccount-BzeWBPgN.js.map
