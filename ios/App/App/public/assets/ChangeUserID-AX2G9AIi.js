import{r as l,u as g,G as p,j as e,P as b,N,x as v,a as y,$ as s,b as C,U as D,f as x}from"./index-BMnTsVIf.js";import{C as S}from"./CommInput-DSDBNgKN.js";const _=({f7router:u})=>{var c,o;const[t,f]=l.useState(!1),[r,h]=l.useState(""),[m,n]=l.useState(!0),a=g(),{watchAsyncFn:j}=p(),I=()=>{/^[a-zA-Z0-9_]{10,20}$/.test(r)?(n(!0),j(()=>D.updateUserInfoApi({coss_id:r}).then(d=>{d.code==200?(a.update({userInfo:{...a.userInfo,coss_id:r}}),u.back()):x.dialog.alert(s(d.msg))}).catch(()=>{x.dialog.alert(s("修改失败"))}))):n(!1)};return e.jsxs(b,{noToolbar:!0,children:[e.jsx(N,{backLink:!0,children:t&&e.jsx(v,{children:e.jsx(y,{onClick:I,children:"提交"})})}),t||e.jsxs("div",{className:"flex h-full flex-col justify-center gap-y-52",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-center font-bold text-xl",children:[s("用户ID"),": ",(c=a.userInfo)==null?void 0:c.coss_id]}),e.jsx("p",{className:"text-center text-gray-400",children:s("修改用户ID后，将无法找回原用户ID")})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(C,{className:"w-52",onClick:()=>f(!t),fill:!0,large:!0,round:!0,children:s("修改用户ID")})})]}),t&&e.jsxs("div",{className:"flex h-full flex-col",children:[e.jsx("h1",{className:"text-center text-xl font-bold mt-10 mb-5",children:"修改用户ID"}),e.jsx("div",{children:e.jsx(S,{defaultValue:(o=a.userInfo)==null?void 0:o.coss_id,onChange:i=>h(i)})}),e.jsx("span",{style:{color:m?"#bbb":"red"},className:"px-5 mt-5",children:"只能包含大小写字母、数字和下划线，并且长度在10到20个字符之间"})]})]})};export{_ as default};
